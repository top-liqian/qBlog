# 虚拟dom相关的面试题

## 1. 虚拟 DOM 的优缺点？

虚拟dom是一种抽象数据结构，之所以需要虚拟DOM，是因为浏览器中操作DOM的代价比较昂贵，频繁操作DOM会产生性能问题。虚拟DOM的作用是在每一次响应式数据发生变化引起页面重渲染时，Vue对比更新前后的虚拟DOM，匹配找出尽可能少的需要更新的真实DOM，从而达到提升性能的目的。

优点：保证性能下限、无需手动操作 DOM提高开发效率

缺点: 在一些性能要求极高的应用中虚拟 DOM 无法进行针对性的极致优化

## 2. 虚拟 DOM 实现原理？

1. 用 JavaScript 对象模拟真实 DOM 树，对真实 DOM 进行抽象；
   
2. diff 算法 — 比较两棵虚拟 DOM 树的差异；
   
3. pach 算法 — 将两个虚拟 DOM 对象的差异应用到真正的 DOM 树

## 3. vue和react在虚拟dom的diff上，做了哪些改进使得速度很快?

vue2的虚拟dom的diff：

## 4. 介绍一下vue的diff算法？

在新老虚拟dom对比时

+ 首先，对比节点本身，判断是否为同一节点，如果不为同一节点，则删除该节点重新创建节点进行替换
+ 如果为相同节点，进行patchVnode，判断如何对该节点的子节点进行处理，先判断一方有子节点一方没有子节点的情况(如果新的children没有子节点，将旧的子节点移除)
+ 比较如果都有子节点，则进行updateChildren，判断如何对这些新老节点的子节点进行操作（diff核心）。
+ 匹配时，找到相同的子节点，递归比较子节点

在diff中，只对同层的子节点进行比较，放弃跨级的节点比较，使得时间复杂从O(n^3)降低值O(n)，也就是说，只有当新旧children都为多个子节点时才需要用核心的Diff算法进行同层级比较。